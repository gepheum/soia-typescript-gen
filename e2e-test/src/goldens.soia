struct UnitTest {
  test_number: int32;
  assertion: Assertion;
}

enum Assertion {
  struct BytesEqual {
    actual: BytesExpression;
    expected: BytesExpression;
  }
  bytes_equal: BytesEqual;

  struct BytesIn {
    actual: BytesExpression;
    // The assertion is satisfied if this array contains the actual value.
    expected: [bytes];
  }
  bytes_in: BytesIn;

  struct StringEqual {
    actual: StringExpression;
    expected: StringExpression;
  }
  string_equal: StringEqual;

  struct StringIn {
    actual: StringExpression;
    // The assertion is satisfied if this array contains the actual value.
    expected: [string];
  }
  string_in: StringIn;

  struct ReserializeValue {
    value: TypedValue;
    expected_dense_json: [string];
    expected_readable_json: [string];
    alternative_jsons: [StringExpression];
    expected_bytes: [bytes];
    alternative_bytes: [BytesExpression];
    expected_type_descriptor: string?;
  }
  reserialize_value: ReserializeValue;

  struct ReserializeLargeString {
    num_chars: int32;
    expected_byte_prefix: bytes;
  }
  reserialize_large_string: ReserializeLargeString;

  struct ReserializeLargeArray {
    num_items: int32;
    expected_byte_prefix: bytes;
  }
  reserialize_large_array: ReserializeLargeArray;
}

enum StringExpression {
  literal: string;
  to_dense_json: TypedValue;
  to_readable_json: TypedValue;
  point_to_dense_json: PointExpression;
  point_to_readable_json: PointExpression;
}

enum BytesExpression {
  literal: bytes;
  to_bytes: TypedValue;
  point_to_bytes: PointExpression;
}

enum TypedValue {
  bool: bool;
  int32: int32;
  int64: int64;
  uint64: uint64;
  float32: float32;
  float64: float64;
  timestamp: timestamp;
  string: string;
  bytes: bytes;
  bool_optional: bool?;
  ints: [int32];
  point: Point;
  color: Color;
  round_trip_dense_json: TypedValue;
  round_trip_readable_json: TypedValue;
  round_trip_bytes: TypedValue;
}

enum PointExpression {
  literal: Point;
  from_json_keep_unrecognized: StringExpression;
  from_json_drop_unrecognized: StringExpression;
  from_bytes_keep_unrecognized: BytesExpression;
  from_bytes_drop_unrecognized: BytesExpression;
}

struct Point {
  removed;
  x: int32;
  removed;
  removed;
  y: int32;
  removed;
  color: Color;
}

struct Color {
  r: int32;
  g: int32;
  b: int32;
  removed;
}

const UNIT_TESTS: [UnitTest] = [
  {
    test_number: 1000,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "bool",
          value: true,
        },
        expected_dense_json: [
          "1",
        ],
        expected_readable_json: [
          "true",
        ],
        alternative_jsons: [
          {
            kind: "literal",
            value: "3.14",
          },
          {
            kind: "literal",
            value: "-1",
          },
          {
            kind: "literal",
            value: '"-Infinity"',
          },
          {
            kind: "literal",
            value: '"1"',
          },
        ],
        expected_bytes: [
          "hex:736f696101",
        ],
        alternative_bytes: [
          {
            kind: "to_bytes",
            value: {
              kind: "float32",
              value: 3.14,
            },
          },
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"primitive\",\n    \"value\": \"bool\"\n  },\n  \"records\": []\n}",
      |},
    },
  },
  {
    test_number: 1001,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "bool",
          value: false,
        },
        expected_dense_json: [
          "0",
        ],
        expected_readable_json: [
          "false",
        ],
        expected_bytes: [
          "hex:736f696100",
        ],
        alternative_jsons: [
          {
            kind: "literal",
            value: "0.0",
          },
          {
            kind: "literal",
            value: "-0.0",
          },
          {
            kind: "literal",
            value: "\"0\"",
          },
        ],
      |},
    },
  },
  {
    test_number: 1002,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "timestamp",
          value: "1970-01-01T00:00:00.000Z",
        },
        expected_dense_json: [
          "0",
        ],
        expected_readable_json: [
          '{\n  "unix_millis": 0,\n  "formatted": "1970-01-01T00:00:00.000Z"\n}',
        ],
        expected_bytes: [
          "hex:736f696100",
        ],
        alternative_jsons: [
          {
            kind: "literal",
            value: "0.0",
          },
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"primitive\",\n    \"value\": \"timestamp\"\n  },\n  \"records\": []\n}",
      |},
    },
  },
  {
    test_number: 1003,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "timestamp",
          value: "2023-08-25T21:30:34.586Z",
        },
        expected_dense_json: [
          "1692999034586",
        ],
        expected_readable_json: [
          '{\n  "unix_millis": 1692999034586,\n  "formatted": "2023-08-25T21:30:34.586Z"\n}',
        ],
        expected_bytes: [
          "hex:736f6961efda269b2e8a010000",
        ],
        alternative_jsons: [
          {
            kind: "literal",
            value: "\"1692999034586\"",
          },
        ],
        alternative_bytes: [
          {
            kind: "to_bytes",
            value: {
              kind: "float64",
              value: 1692999034586.1,
            },
          },
        ],
      |},
    },
  },
  {
    test_number: 1004,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: 2,
        },
        expected_dense_json: [
          "2",
        ],
        expected_readable_json: [
          "2",
        ],
        expected_bytes: [
          "hex:736f696102",
        ],
        alternative_jsons: [
          {
            kind: "literal",
            value: "\"2\"",
          },
        ],
        alternative_bytes: [
          {
            kind: "to_bytes",
            value: {
              kind: "float64",
              value: 2.0,
            },
          },
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"primitive\",\n    \"value\": \"int32\"\n  },\n  \"records\": []\n}",
      |},
    },
  },
  {
    test_number: 1005,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: -1,
        },
        expected_dense_json: [
          "-1",
        ],
        expected_readable_json: [
          "-1",
        ],
        expected_bytes: [
          "hex:736f6961ebff",
        ],
        alternative_jsons: [
          {
            kind: "literal",
            value: "\"-1\"",
          },
        ],
      |},
    },
  },
  {
    test_number: 1006,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: 231,
        },
        expected_dense_json: [
          "231",
        ],
        expected_readable_json: [
          "231",
        ],
        expected_bytes: [
          "hex:736f6961e7",
        ],
      |},
    },
  },
  {
    test_number: 1007,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: 232,
        },
        expected_dense_json: [
          "232",
        ],
        expected_readable_json: [
          "232",
        ],
        expected_bytes: [
          "hex:736f6961e8e800",
        ],
      |},
    },
  },
  {
    test_number: 1008,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: 65535,
        },
        expected_dense_json: [
          "65535",
        ],
        expected_readable_json: [
          "65535",
        ],
        expected_bytes: [
          "hex:736f6961e8ffff",
        ],
      |},
    },
  },
  {
    test_number: 1009,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: 65536,
        },
        expected_dense_json: [
          "65536",
        ],
        expected_readable_json: [
          "65536",
        ],
        expected_bytes: [
          "hex:736f6961e900000100",
        ],
      |},
    },
  },
  {
    test_number: 1010,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: 2147483647,
        },
        expected_dense_json: [
          "2147483647",
        ],
        expected_readable_json: [
          "2147483647",
        ],
        expected_bytes: [
          "hex:736f6961e9ffffff7f",
        ],
      |},
    },
  },
  {
    test_number: 1011,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: -255,
        },
        expected_dense_json: [
          "-255",
        ],
        expected_readable_json: [
          "-255",
        ],
        expected_bytes: [
          "hex:736f6961eb01",
        ],
      |},
    },
  },
  {
    test_number: 1012,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: -256,
        },
        expected_dense_json: [
          "-256",
        ],
        expected_readable_json: [
          "-256",
        ],
        expected_bytes: [
          "hex:736f6961eb00",
        ],
      |},
    },
  },
  {
    test_number: 1013,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: -257,
        },
        expected_dense_json: [
          "-257",
        ],
        expected_readable_json: [
          "-257",
        ],
        expected_bytes: [
          "hex:736f6961ecfffe",
        ],
      |},
    },
  },
  {
    test_number: 1014,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: -65536,
        },
        expected_dense_json: [
          "-65536",
        ],
        expected_readable_json: [
          "-65536",
        ],
        expected_bytes: [
          "hex:736f6961ec0000",
        ],
      |},
    },
  },
  {
    test_number: 1015,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: -65537,
        },
        expected_dense_json: [
          "-65537",
        ],
        expected_readable_json: [
          "-65537",
        ],
        expected_bytes: [
          "hex:736f6961edfffffeff",
        ],
      |},
    },
  },
  {
    test_number: 1016,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int32",
          value: -2147483648,
        },
        expected_dense_json: [
          "-2147483648",
        ],
        expected_readable_json: [
          "-2147483648",
        ],
        expected_bytes: [
          "hex:736f6961ed00000080",
        ],
      |},
    },
  },
  {
    test_number: 1017,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int64",
          value: 888888888888,
        },
        expected_dense_json: [
          "888888888888",
        ],
        expected_readable_json: [
          "888888888888",
        ],
        expected_bytes: [
          "hex:736f6961ee380ee8f5ce000000",
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"primitive\",\n    \"value\": \"int64\"\n  },\n  \"records\": []\n}",
      |},
    },
  },
  {
    test_number: 1018,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int64",
          value: 9223372036854775807,
        },
        expected_dense_json: [
          "\"9223372036854775807\"",
        ],
        expected_readable_json: [
          "\"9223372036854775807\"",
        ],
        expected_bytes: [
          "hex:736f6961eeffffffffffffff7f",
        ],
      |},
    },
  },
  {
    test_number: 1019,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int64",
          value: -9223372036854775808,
        },
        expected_dense_json: [
          "\"-9223372036854775808\"",
        ],
        expected_readable_json: [
          "\"-9223372036854775808\"",
        ],
        expected_bytes: [
          "hex:736f6961ee0000000000000080",
        ],
      |},
    },
  },
  {
    test_number: 1020,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int64",
          value: 9007199254740991,
        },
        expected_dense_json: [
          "9007199254740991",
        ],
        expected_readable_json: [
          "9007199254740991",
        ],
        expected_bytes: [
          "hex:736f6961eeffffffffffff1f00",
        ],
      |},
    },
  },
  {
    test_number: 1021,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int64",
          value: 9007199254740992,
        },
        expected_dense_json: [
          "\"9007199254740992\"",
        ],
        expected_readable_json: [
          "\"9007199254740992\"",
        ],
        expected_bytes: [
          "hex:736f6961ee0000000000002000",
        ],
      |},
    },
  },
  {
    test_number: 1022,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int64",
          value: -9007199254740991,
        },
        expected_dense_json: [
          "-9007199254740991",
        ],
        expected_readable_json: [
          "-9007199254740991",
        ],
        expected_bytes: [
          "hex:736f6961ee010000000000e0ff",
        ],
      |},
    },
  },
  {
    test_number: 1023,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "int64",
          value: -9007199254740992,
        },
        expected_dense_json: [
          "\"-9007199254740992\"",
        ],
        expected_readable_json: [
          "\"-9007199254740992\"",
        ],
        expected_bytes: [
          "hex:736f6961ee000000000000e0ff",
        ],
      |},
    },
  },
  {
    test_number: 1024,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "uint64",
          value: 255,
        },
        expected_dense_json: [
          "255",
        ],
        expected_readable_json: [
          "255",
        ],
        expected_bytes: [
          "hex:736f6961e8ff00",
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"primitive\",\n    \"value\": \"uint64\"\n  },\n  \"records\": []\n}",
      |},
    },
  },
  {
    test_number: 1025,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "uint64",
          value: 65535,
        },
        expected_dense_json: [
          "65535",
        ],
        expected_readable_json: [
          "65535",
        ],
        expected_bytes: [
          "hex:736f6961e8ffff",
        ],
      |},
    },
  },
  {
    test_number: 1026,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "uint64",
          value: 4294967295,
        },
        expected_dense_json: [
          "4294967295",
        ],
        expected_readable_json: [
          "4294967295",
        ],
        expected_bytes: [
          "hex:736f6961e9ffffffff",
        ],
      |},
    },
  },
  {
    test_number: 1027,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "uint64",
          value: 18446744073709551615,
        },
        expected_dense_json: [
          "\"18446744073709551615\"",
        ],
        expected_readable_json: [
          "\"18446744073709551615\"",
        ],
        expected_bytes: [
          "hex:736f6961eaffffffffffffffff",
        ],
      |},
    },
  },
  {
    test_number: 1028,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "float32",
          value: 3.14,
        },
        expected_dense_json: [
          "3.14",
        ],
        expected_readable_json: [
          "3.14",
        ],
        expected_bytes: [
          "hex:736f6961f0c3f54840",
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"primitive\",\n    \"value\": \"float32\"\n  },\n  \"records\": []\n}",
      |},
    },
  },
  {
    test_number: 1029,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "float64",
          value: 3.14,
        },
        expected_dense_json: [
          "3.14",
        ],
        expected_readable_json: [
          "3.14",
        ],
        expected_bytes: [
          "hex:736f6961f11f85eb51b81e0940",
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"primitive\",\n    \"value\": \"float64\"\n  },\n  \"records\": []\n}",
      |},
    },
  },
  {
    test_number: 1030,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "float64",
          value: -3.14,
        },
        expected_dense_json: [
          "-3.14",
        ],
        expected_readable_json: [
          "-3.14",
        ],
        expected_bytes: [
          "hex:736f6961f11f85eb51b81e09c0",
        ],
      |},
    },
  },
  {
    test_number: 1031,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "float32",
          value: 0.0,
        },
        expected_dense_json: [
          "0",
          "0.0",
        ],
        expected_readable_json: [
          "0",
          "0.0",
        ],
        expected_bytes: [
          "hex:736f696100",
        ],
      |},
    },
  },
  {
    test_number: 1032,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "string",
          value: "",
        },
        expected_dense_json: [
          "\"\"",
        ],
        expected_readable_json: [
          "\"\"",
        ],
        expected_bytes: [
          "hex:736f6961f2",
        ],
        alternative_jsons: [
          {
            kind: "literal",
            value: "0",
          },
        ],
        alternative_bytes: [
          {
            kind: "to_bytes",
            value: {
              kind: "int32",
              value: 0,
            },
          },
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"primitive\",\n    \"value\": \"string\"\n  },\n  \"records\": []\n}",
      |},
    },
  },
  {
    test_number: 1033,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "string",
          value: "Foôbar",
        },
        expected_dense_json: [
          "\"Foôbar\"",
          "\"Fo\\u00f4bar\"",
        ],
        expected_readable_json: [
          "\"Foôbar\"",
          "\"Fo\\u00f4bar\"",
        ],
        expected_bytes: [
          "hex:736f6961f307466fc3b4626172",
        ],
      |},
    },
  },
  {
    test_number: 1034,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "string",
          value: 'Foo\n"bar"',
        },
        expected_dense_json: [
          '"Foo\\n\\"bar\\""',
        ],
        expected_readable_json: [
          '"Foo\\n\\"bar\\""',
        ],
        expected_bytes: [
          "hex:736f6961f309466f6f0a2262617222",
        ],
      |},
    },
  },
  {
    test_number: 1035,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "bytes",
          value: "hex:f50469b735",
        },
        expected_dense_json: [
          '"9QRptzU="',
        ],
        expected_readable_json: [
          '"hex:f50469b735"',
        ],
        expected_bytes: [
          "hex:736f6961f505f50469b735",
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"primitive\",\n    \"value\": \"bytes\"\n  },\n  \"records\": []\n}",
      |},
    },
  },
  {
    test_number: 1036,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "bytes",
          value: "hex:",
        },
        expected_dense_json: [
          '""',
        ],
        expected_readable_json: [
          '"hex:"',
        ],
        expected_bytes: [
          "hex:736f6961f4",
        ],
        alternative_jsons: [
          {
            kind: "literal",
            value: "0",
          },
        ],
        alternative_bytes: [
          {
            kind: "to_bytes",
            value: {
              kind: "int32",
              value: 0,
            },
          },
        ],
      |},
    },
  },
  {
    test_number: 1037,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "bool_optional",
          value: null,
        },
        expected_dense_json: [
          "null",
        ],
        expected_readable_json: [
          "null",
        ],
        expected_bytes: [
          "hex:736f6961ff",
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"optional\",\n    \"value\": {\n      \"kind\": \"primitive\",\n      \"value\": \"bool\"\n    }\n  },\n  \"records\": []\n}",
      |},
    },
  },
  {
    test_number: 1038,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "bool_optional",
          value: null,
        },
        expected_dense_json: [
          "null",
        ],
        expected_readable_json: [
          "null",
        ],
        expected_bytes: [
          "hex:736f6961ff",
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"optional\",\n    \"value\": {\n      \"kind\": \"primitive\",\n      \"value\": \"bool\"\n    }\n  },\n  \"records\": []\n}",
      |},
    },
  },
  {
    test_number: 1039,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "ints",
          value: [],
        },
        expected_dense_json: [
          "[]",
        ],
        expected_readable_json: [
          "[]",
        ],
        expected_bytes: [
          "hex:736f6961f6",
        ],
        alternative_jsons: [
          {
            kind: "literal",
            value: "0",
          },
        ],
        alternative_bytes: [
          {
            kind: "to_bytes",
            value: {
              kind: "int32",
              value: 0,
            },
          },
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"array\",\n    \"value\": {\n      \"item\": {\n        \"kind\": \"primitive\",\n        \"value\": \"int32\"\n      }\n    }\n  },\n  \"records\": []\n}",
      |},
    },
  },
  {
    test_number: 1040,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "ints",
          value: [
            1,
            2,
            3,
          ],
        },
        expected_dense_json: [
          "[1,2,3]",
        ],
        expected_readable_json: [
          "[\n  1,\n  2,\n  3\n]",
        ],
        expected_bytes: [
          "hex:736f6961f9010203",
        ],
      |},
    },
  },
  {
    test_number: 1041,
    assertion: {
      kind: "reserialize_large_string",
      value: {|
        num_chars: 231,
        expected_byte_prefix: "hex:736f6961",
      |},
    },
  },
  {
    test_number: 1042,
    assertion: {
      kind: "reserialize_large_string",
      value: {|
        num_chars: 65536,
        expected_byte_prefix: "hex:736f6961",
      |},
    },
  },
  {
    test_number: 1043,
    assertion: {
      kind: "reserialize_large_array",
      value: {|
        num_items: 231,
        expected_byte_prefix: "hex:736f6961fae7",
      |},
    },
  },
  {
    test_number: 1044,
    assertion: {
      kind: "reserialize_large_array",
      value: {|
        num_items: 232,
        expected_byte_prefix: "hex:736f6961fae8e800",
      |},
    },
  },
  {
    test_number: 1045,
    assertion: {
      kind: "reserialize_large_array",
      value: {|
        num_items: 65535,
        expected_byte_prefix: "hex:736f6961fae8",
      |},
    },
  },
  {
    test_number: 1046,
    assertion: {
      kind: "reserialize_large_array",
      value: {|
        num_items: 65536,
        expected_byte_prefix: "hex:736f6961fae9",
      |},
    },
  },
  {
    test_number: 1047,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "point",
          value: {||},
        },
        expected_dense_json: [
          "[]",
        ],
        expected_readable_json: [
          "{}",
        ],
        expected_bytes: [
          "hex:736f6961f6",
        ],
        alternative_jsons: [
          {
            kind: "literal",
            value: "0",
          },
        ],
        alternative_bytes: [
          {
            kind: "to_bytes",
            value: {
              kind: "int32",
              value: 0,
            },
          },
        ],
      |},
    },
  },
  {
    test_number: 1048,
    assertion: {
      kind: "reserialize_value",
      value: {|
        value: {
          kind: "point",
          value: {
            x: 10,
            y: 20,
            color: {
              r: 255,
              g: 128,
              b: 0,
            },
          },
        },
        expected_dense_json: [
          "[0,10,0,0,20,0,[255,128]]",
        ],
        expected_readable_json: [
          '{\n  "x": 10,\n  "y": 20,\n  "color": {\n    "r": 255,\n    "g": 128\n  }\n}',
        ],
        expected_bytes: [
          "hex:736f6961fa07000a00001400f8e8ff0080",
        ],
        expected_type_descriptor: "{\n  \"type\": {\n    \"kind\": \"record\",\n    \"value\": \"goldens.soia:Point\"\n  },\n  \"records\": [\n    {\n      \"kind\": \"struct\",\n      \"id\": \"goldens.soia:Point\",\n      \"fields\": [\n        {\n          \"name\": \"x\",\n          \"type\": {\n            \"kind\": \"primitive\",\n            \"value\": \"int32\"\n          },\n          \"number\": 1\n        },\n        {\n          \"name\": \"y\",\n          \"type\": {\n            \"kind\": \"primitive\",\n            \"value\": \"int32\"\n          },\n          \"number\": 4\n        },\n        {\n          \"name\": \"color\",\n          \"type\": {\n            \"kind\": \"record\",\n            \"value\": \"goldens.soia:Color\"\n          },\n          \"number\": 6\n        }\n      ],\n      \"removed_fields\": [\n        0,\n        2,\n        3,\n        5\n      ]\n    },\n    {\n      \"kind\": \"struct\",\n      \"id\": \"goldens.soia:Color\",\n      \"fields\": [\n        {\n          \"name\": \"r\",\n          \"type\": {\n            \"kind\": \"primitive\",\n            \"value\": \"int32\"\n          },\n          \"number\": 0\n        },\n        {\n          \"name\": \"g\",\n          \"type\": {\n            \"kind\": \"primitive\",\n            \"value\": \"int32\"\n          },\n          \"number\": 1\n        },\n        {\n          \"name\": \"b\",\n          \"type\": {\n            \"kind\": \"primitive\",\n            \"value\": \"int32\"\n          },\n          \"number\": 2\n        }\n      ],\n      \"removed_fields\": [\n        3\n      ]\n    }\n  ]\n}",
      |},
    },
  },
];
